"use strict";var $Router={},errorURLTriedAndFailed=!1,hitCounter=0,getType=function(e){return Object.prototype.toString.call(e).replace(/[\[\]]/g,"").split(" ")[1]},validatePathToMap=function(e){if(!e.path&&!e.otherwise)throw new Error("Please Provide a Path");if(!e.templateUrl&&!e.otherwise)throw new Error("Please Provide a valid Template Url for '"+e.path+"' Path")},pushToHistory=e=>{history.pushState({url:e},null,`./${e}`),$Router.go(e)},configurePathMap=function(e){$Router.pathMap||($Router.pathMap={}),validatePathToMap(e),!e.otherwise&&($Router.pathMap[e.path]=e.templateUrl),e.otherwise&&($Router.options.useHashStrategy?$Router.otherwiseURL="#"+e.otherwise:$Router.otherwiseURL=e.otherwise)},resetClassForAnchors=()=>{let e=document.querySelectorAll("a."+$Router.options.activateLinkClass);for(let t of e){let e=t.className.replace(/active/,"").trim();t.setAttribute("class",e+" "+$Router.options.defaultLinkClass)}},hasRoutingChanged=function(){$Router.options.useHashStrategy&&location.hash&&$Router.pathMap[location.hash.split("#")[1]]?$Router.go(location.hash):!$Router.options.useHashStrategy&&location.pathname&&$Router.pathMap[location.pathname.split("/")[1]]?$Router.go(location.pathname.split("/")[1]):$Router.otherwiseURL&&($Router.options.useHashStrategy?location.hash=$Router.otherwiseURL:pushToHistory($Router.otherwiseURL))},congigureRouter=function(e){$Router.options=Object.assign({},$Router.options,e)},routeErrorPage=function(){$Router.options.customErrorPageUrl&&!errorURLTriedAndFailed?$Router.route($Router.options.customErrorPageUrl,!0):$Router.options.customErrorPageTemplate?document.querySelector("["+$Router.options.routerOutletSelector+"]").innerHTML=$Router.options.customErrorPageTemplate:document.querySelector("["+$Router.options.routerOutletSelector+"]").innerHTML=$Router.noRouteDefinedTemplate},configureForPushStateStrategy=()=>{Array.from(document.querySelectorAll("a[r-href]")).forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("r-href");pushToHistory(o)}))}))},configureForHashStrategy=()=>{Array.from(document.querySelectorAll("a[r-href]")).forEach((e=>{let t=e.getAttribute("r-href");e.setAttribute("href","#"+t)}))};$Router.options={customErrorPageUrl:void 0,customErrorPageTemplate:void 0,showErrorPage:!0,activateLinks:!0,activateLinkClass:"active",defaultLinkClass:"",beforeRouteChange:void 0,afterRouteChange:void 0,onRouteChangeError:void 0,routerOutletSelector:"router-outlet",useHashStrategy:!1,maxReRoute:20},$Router.go=function(e){resetClassForAnchors(),e=e.replace(/#/g,"");let t=document.querySelector("a[r-href='"+e+"']");$Router.options.activateLinks&&t&&t.setAttribute("class",t.className+" "+$Router.options.defaultLinkClass+" "+$Router.options.activateLinkClass),$Router.options.beforeRouteChange&&$Router.options.beforeRouteChange(e),$Router.route(e)},$Router.hash=function(e){if(!e)throw new Error("Please provide a valid hash route");e=e.replace(/#/g,""),this.options.useHashStrategy&&(location.hash=e),!this.options.useHashStrategy&&pushToHistory(e)},$Router.config=function(e,t){switch(getType(e)){case"Array":for(var o=0;o<e.length;o++)configurePathMap(e[o]);break;case"Object":configurePathMap(e);break;default:throw new Error("Please provide a valid option for configuring the routes")}congigureRouter(t),this.options.useHashStrategy?configureForHashStrategy():configureForPushStateStrategy(),hasRoutingChanged()},$Router.noRouteDefinedTemplate="<style>.errorStatement_routeNow{color:#ff8787;text-align:center;margin-top:100px;}</style><div class='errorStatement_routeNow'>Sorry this route is not available</div>",$Router.route=function(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==this.readyState)switch(this.status){case 200:document.querySelector("["+$Router.options.routerOutletSelector+"]").innerHTML=this.responseText,$Router.options.afterRouteChange&&$Router.options.afterRouteChange(e);break;case 404:t?errorURLTriedAndFailed=!0:$Router.options.onRouteChangeError&&$Router.options.onRouteChangeError(e),$Router.options.showErrorPage&&routeErrorPage()}},t?o.open("GET",e,!0):o.open("GET",$Router.pathMap[e],!0),o.send()},window.onhashchange=hasRoutingChanged,window.addEventListener("popstate",(e=>{$Router.options.useHashStrategy||$Router.go(e.state.url)})),window.$Router=$Router,"object"==typeof exports&&(module.exports={$Router:$Router});
